!function(D){D.fn.calendarMaker=function(e){function n(e){D.ajax({url:v+"/resources/locales/"+e+".json",async:!1,dataType:"json",success:function(e){e?u=e:alert("Error loading JSON file")},error:function(e,t){alert(h(e,t)),u=null}})}function d(t){if(""!==jQuery.trim(t)){try{var e=u.custom.categories.none?u.custom.categories.none:"Select category",a='<button type="button" id="btnCustomCategories" class="fc-button fc-button-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;'+e+'&nbsp;&nbsp;<span class="caret"></span></button>';a+='<ul class="dropdown-menu" id="listCategories">',a+='<li><a href="#" id="selectCatOpt" title="Select category">'+e+"</a></li>";var n=t.split(",");D.each(n,function(e,t){a+='<li><a href="#" title="'+t+'">'+(u.custom.categories[t]?u.custom.categories[t]:t)+"</a></li>"}),a+="</ul>"}catch(e){a='<button type="button" id="btnCustomCategories" class="fc-button fc-button-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;Select category&nbsp;&nbsp;<span class="caret"></span></button>';a+='<ul class="dropdown-menu" id="listCategories">',a+='<li><a href="#" id="selectCatOpt" title="Select category">Select category</a></li>';n=t.split(",");D.each(n,function(e,t){a+='<li><a href="#" title="'+t+'">'+t+"</a></li>"}),a+="</ul>"}0<D("#btnCustomCategories").length?(D("#listCategories").remove(),D("#btnCustomCategories").replaceWith(a)):D(".fc-categories-button").first().replaceWith(a),D("#listCategories li a").click(function(){D("#btnCustomCategories").html('<span style="float: left"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;'+D(this).text()+'&nbsp;&nbsp;</span><span class="caret" style="margin-top: 8px; float: right"></span>');var e=f.getEventSourceById(1);e&&e.remove();try{D("#"+y.barSearch.btnReset).click()}catch(e){}f.addEventSource({id:"1",url:v+"/ajax/loadEvents.php",backgroundColor:y.bgColor,textColor:y.txColor,extraParams:{lang:y.selectedLocaleCode,uuid:y.uuidCalendar,category:D(this).attr("title"),t:(new Date).getTime()}})}),D("#selectCatOpt").click()}}function h(e,t){return 0===e.status?"Not connected.\nPlease verify your network connection":404===e.status?"The requested page not found. [404]":500===e.status?"Internal Server Error [500]":"parsererror"===t?"Requested JSON parse failed":"timeout"===t?"Time out error":"abort"===t?"Ajax request aborted":"Uncaught Error"}String.prototype.fileExists=function(){return filename=this.trim(),200===jQuery.ajax({url:filename,type:"HEAD",async:!1}).status};var t={setLanguage:function(e){return f.setOption("locale",e),y.selectedLocaleCode=e,n(y.selectedLocaleCode),this},getLanguage:function(){return f.getOption("locale")},getLocaleCodes:function(){return(f=new FullCalendar.Calendar).getAvailableLocaleCodes()},init:function(){f=new FullCalendar.Calendar(document.getElementById(y.divCal),{aspectRatio:1.2,handleWindowResize:!0,themeSystem:"standard",timeZone:y.initialTimeZone,locale:y.selectedLocaleCode,navLinks:!0,editable:!0,selectable:!0,dayMaxEvents:!0,businessHours:!0,nowIndicator:!0,headerToolbar:{left:"title",center:"",right:"categories,prevYear,prev,next,nextYear"},footerToolbar:{left:"dayGridMonth,timeGridWeek,timeGridDay,listWeek",center:"",right:"today"},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},views:{dayGrid:{},timeGrid:{},week:{},day:{}},customButtons:{prev:{click:function(){try{D("#"+y.barSearch.btnReset).click()}catch(e){}f.prev()}},next:{click:function(){try{D("#"+y.barSearch.btnReset).click()}catch(e){}f.next()}},categories:{text:""}},eventSources:{failure:function(){document.getElementById("script-warning").style.display="inline"}},events:{id:"1",url:v+"/ajax/loadEvents.php",backgroundColor:y.bgColor,textColor:y.txColor,extraParams:{lang:y.selectedLocaleCode,uuid:y.uuidCalendar,t:(new Date).getTime()},failure:function(e){!1===e.status&&(document.getElementById("script-warning").innerHTML=e.msg,document.getElementById("script-warning").style.display="inline")},success:function(e){!1===e.status&&(document.getElementById("script-warning").innerHTML=e.msg,document.getElementById("script-warning").style.display="inline")}},loading:function(e){null!==document.getElementById(y.divLoad)&&(document.getElementById(y.divLoad).style.display=e?"inline":"none")},eventResize:function(t){var e,a,n;y.readOnly?t.revert():(e="local"===f.getOption("timeZone")?Intl.DateTimeFormat().resolvedOptions().timeZone:f.getOption("timeZone"),a=[],(n={}).idEvent=t.event.id,n.eventType="resize",n.startDelta=t.startDelta,n.endDelta=t.endDelta,n.start=moment.tz(t.event.start,e).format(),n.end=moment.tz(t.event.end,e).format(),a.push(n),D.ajax({url:v+"/php/update.php",type:"POST",cache:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({param:a,lang:y.selectedLocaleCode,uuid:y.uuidCalendar}),dataType:"json",success:function(e){e.status?f.refetchEvents():(alert(e.msg),t.revert())},error:function(e,t){alert(h(e,t))}}))},eventDrop:function(t){var e,a,n,d;y.readOnly?t.revert():(e="local"===f.getOption("timeZone")?Intl.DateTimeFormat().resolvedOptions().timeZone:f.getOption("timeZone"),a=!0===t.oldEvent.allDay&&!1===t.event.allDay?moment.tz(moment(t.event.start).add(30,"m"),e).format():!1===t.oldEvent.allDay&&!0===t.event.allDay?moment.tz(moment(t.event.start).add(1,"days"),e).format():moment.tz(t.event.end,e).format(),n=[],(d={}).idEvent=t.event.id,d.delta=t.delta,d.eventType="drop",d.oldAllDay=t.oldEvent.allDay,d.oldStart=moment.tz(t.oldEvent.start,e).format(),d.oldEnd=moment.tz(t.oldEvent.end,e).format(),d.newAllDay=t.event.allDay,d.newStart=moment.tz(t.event.start,e).format(),d.newEnd=a,n.push(d),D.ajax({url:v+"/php/update.php",type:"POST",cache:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({param:n,lang:y.selectedLocaleCode,uuid:y.uuidCalendar}),dataType:"json",success:function(e){e.status?f.refetchEvents():(alert(e.msg),t.revert())},error:function(e,t){alert(h(e,t))}}))},eventClick:function(a){a.jsEvent.preventDefault(),D.ajax({url:v+"/ajax/getEvent.php",type:"post",data:{id:a.event.id,uuid:y.uuidCalendar},cache:!1,dataType:"json",success:function(s){var e;s.status?1===s.import?(s.event=a.event,D("#showEvent").remove(),D('<div id="showEvent" class="modal modCal fade col-xs-12 col-sm-12 col-md-12"></div>').appendTo("body"),e=s.event.recurring?"recurring":"single",D("#showEvent").load(v+"/ajax/showEventImported.php",{deleteType:e,lang:y.selectedLocaleCode},function(){var e=D("<textarea/>").html(s.event.title).val();D("#showTitle").val(e),D("#bgColorBullet").css("color",s.event.color?s.event.color:y.bgColorImported),D("#showDescription").html(s.event.extendedProps.description),D("#showStartAt").val(moment(s.event.start)),D("#showEndAt").val(moment(s.event.end)),D("#showEvent").modal({show:!0})})):(D("#showEvent").remove(),D('<div id="showEvent" class="modal modCal fade col-xs-12 col-sm-12 col-md-12"></div>').appendTo("body"),e=s.event.recurring?"recurring":"single",D("#showEvent").load(v+"/ajax/showEvent.php",{id:a.event.id,uuid:y.uuidCalendar,deleteType:e,lang:y.selectedLocaleCode,readOnly:y.readOnly},function(){var e=D("<textarea/>").html(s.event.title).val(),t=s.event.allDay?1:0;D("#showTitle").val(e),D("#showDescription").html((s.event.description+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}})),D("#showUrl").val(s.event.url),s.event.url&&D("#goUrl").prop("href",s.event.url),D("#bgColorBullet").css("color",s.event.color?s.event.color:y.bgColor),D("#textColorBullet").css("color",s.event.text_color?s.event.text_color:y.txColor),D("#showStartAt").val(moment(s.event.start_event)),D("#showEndAt").val(moment(s.event.end_event)),D("#showRange").html(1==t?"All day":"Custom date"),D("#showEvent").modal({show:!0}),D("#btnEditEvent").on("click",function(){D.ajax({url:v+"/ajax/editEvent.php",type:"POST",cache:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({param:s,lang:y.selectedLocaleCode,uuid:y.uuidCalendar}),success:function(l){D("#showEvent").slideUp("fast",function(){D("#showEvent").html("")}),D("#showEvent").slideDown("fast",function(){if(D("#showEvent").html(l),D("#editCP1").colorpicker({color:s.event.color?s.event.color:y.bgColor,format:"hex",align:"left"}),D("#editCP2").colorpicker({color:s.event.text_color?s.event.text_color:y.txColor,format:"hex",align:"left"}),D("#editdp1").datetimepicker({format:"YYYY-MM-DD",locale:y.selectedLocaleCode}),D("#editdp2").datetimepicker({format:"YYYY-MM-DD",locale:y.selectedLocaleCode}),D("#editdtp1").datetimepicker({format:"YYYY-MM-DD HH:mm",locale:y.selectedLocaleCode}),D("#editdtp2").datetimepicker({format:"YYYY-MM-DD HH:mm",locale:y.selectedLocaleCode}),D("#editenddp1").datetimepicker({format:"YYYY-MM-DD HH:mm",locale:y.selectedLocaleCode}),D("#editdp1").on("dp.change",function(e){var t=moment(s.event.start_event),a=moment(s.event.end_event).diff(t,"days");e.date&&e.date.add(a,"days"),D("#editdp2").data("DateTimePicker").minDate(e.date.add(1-a,"days")),D("#editdp2").data("DateTimePicker").date(e.date);var n="allday"===c("edit")?moment(D("#editdp1").data("DateTimePicker").date()).format("d"):moment(D("#editdtp1").data("DateTimePicker").date()).format("d");D('input[name="editDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===n&&(this.checked=!0,D(this).parent().addClass("active"))}),"allday"===c("edit")?(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")),D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")),D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#editMonthTimeRecurring").val(D("#editRepMonth0").text()),D("#editYearTimeRecurring").val(D("#editRepYear0").text())}),D("#editdp2").on("dp.change",function(e){D("#editenddp1").data("DateTimePicker").date(D("#editdp2").data("DateTimePicker").date())}),D("#editenddp1").on("dp.change",function(e){"allday"===c("edit")?D("#editdp2").data("DateTimePicker").date(moment(D("#editenddp1").data("DateTimePicker").date()).format("YYYY-MM-DD")):D("#editdtp2").data("DateTimePicker").date(moment(D("#editenddp1").data("DateTimePicker").date()).format("YYYY-MM-DD HH:mm"))}),D("#editdtp1").on("dp.change",function(e){var t=moment(s.event.start_event),a=moment(s.event.end_event).diff(t,"m");e.date&&e.date.add(a,"m"),D("#editdtp2").data("DateTimePicker").date(e.date),D("#editdtp2").data("DateTimePicker").minDate(e.date.add(30-a,"m"));var n="allday"===c("edit")?moment(D("#editdp1").data("DateTimePicker").date()).format("d"):moment(D("#editdtp1").data("DateTimePicker").date()).format("d");D('input[name="editDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===n&&(this.checked=!0,D(this).parent().addClass("active"))}),"allday"===c("edit")?(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")),D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")),D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#editMonthTimeRecurring").val(D("#editRepMonth0").text()),D("#editYearTimeRecurring").val(D("#editRepYear0").text())}),D("#editdtp2").on("dp.change",function(e){D("#editenddp1").data("DateTimePicker").date(D("#editdtp2").data("DateTimePicker").date())}),D("#editdp1").data("DateTimePicker").date(moment(s.event.start_event).format("YYYY-MM-DD")),D("#editdp2").data("DateTimePicker").date(moment(s.event.end_event).format("YYYY-MM-DD")),D("#editdtp1").data("DateTimePicker").date(moment(s.event.start_event).format("YYYY-MM-DD HH:mm")),D("#editdtp2").data("DateTimePicker").date(moment(s.event.end_event).format("YYYY-MM-DD HH:mm")),D("#editChooseCategory li a").click(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editCalendarCategory").val(D(this).attr("title"))}),null!==s.event.category&&""!==s.event.category)try{var t=void 0!==u.custom.categories[s.event.category]?u.custom.categories[s.event.category]:s.event.category;arrCats=y.optCategories.split(","),-1!=arrCats.indexOf(s.event.category)&&D("#editCategory").html('<span style="float: left">'+t+'</span><span class="caret" style="margin-top: 8px; float: right"></span>')}catch(e){t=s.event.category;arrCats=y.optCategories.split(","),-1!=arrCats.indexOf(s.event.category)&&D("#editCategory").html('<span style="float: left">'+t+'</span><span class="caret" style="margin-top: 8px; float: right"></span>')}if(D("#editChooseRecurring li a").click(function(){switch(D("#divEditRecurring").css("display","block"),D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRecurring").val(D(this).text()),m("edit"),D(this).text()){case u.editEvent.body.daily_recurring:D("#editDivDaysRecurring").css("display","block");break;case u.editEvent.body.weekly_recurring:D("#editDivWeeksRecurring").css("display","block");var e="allday"===c("edit")?moment(D("#editdp1").data("DateTimePicker").date()).format("d"):moment(D("#editdtp1").data("DateTimePicker").date()).format("d");D('input[name="editDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===e&&(this.checked=!0,D(this).parent().addClass("active"))});break;case u.editEvent.body.monthly_recurring:D("#editDivMonthsRecurring").css("display","block"),"allday"===c("edit")?(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd"))):(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd"))),D("#editMonthTimeRecurring").val(D("#editRepMonth0").text());break;case u.editEvent.body.yearly_recurring:D("#editDivYearsRecurring").css("display","block"),"allday"===c("edit")?(D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#editYearTimeRecurring").val(D("#editRepYear0").text());break;default:D("#divEditRecurring").css("display","none")}}),D("#editChooseTypeRecurring li a").click(function(){var e;D("#editChooseTime").html(D(this).text()+'&nbsp;<span class="caret"></span>'),"weeks"===D(this).text()?(D("#editDivWeeksRecurring").css("display","block"),e="allday"===c("edit")?moment(D("#editdp1").data("DateTimePicker").date()).format("d"):moment(D("#editdtp1").data("DateTimePicker").date()).format("d"),D('input[name="editDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===e&&(this.checked=!0,D(this).parent().addClass("active"))})):D("#editDivWeeksRecurring").css("display","none"),"months"===D(this).text()?(D("#editDivMonthsRecurring").css("display","block"),"allday"===c("edit")?(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd"))):(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd"))),D("#editMonthTimeRecurring").val(D("#editRepMonth0").text())):D("#editDivMonthsRecurring").css("display","none"),D("#editTypeRecurring").val(D(this).text())}),D("#editChooseMonthTimeRecurring li a").click(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editMonthTimeRecurring").val(D(this).text())}),D("#editChooseYearTimeRecurring li a").click(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editYearTimeRecurring").val(D(this).text())}),D("#editEndRecurring li a").click(function(){D("#editEndRecurring").val(D(this).text())}),D('input[name="editDateType"]').on("change",function(){var e="allday"===c("edit")?moment(D("#editdp1").data("DateTimePicker").date()).format("d"):moment(D("#editdtp1").data("DateTimePicker").date()).format("d");D('input[name="editDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===e&&(this.checked=!0,D(this).parent().addClass("active"))}),"allday"===c("edit")?(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")),D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")),D("#editChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepYear0").text(u.core.yearly_on+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#editRepYear1").text(u.core.every+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#editMonthTimeRecurring").val(D("#editRepMonth0").text()),D("#editYearTimeRecurring").val(D("#editRepYear0").text()),"allday"===c("edit")&&("none"===D("#divEditDateAllday").css("display")&&D(".divEditDateAllday, .divEditDateCustom").slideToggle("fast"),D("#editenddp1").data("DateTimePicker").date(D("#editdp2").data("DateTimePicker").date())),"custom"===c("edit")&&("none"===D("#divEditDateCustom").css("display")&&D(".divEditDateAllday, .divEditDateCustom").slideToggle("fast"),D("#editenddp1").data("DateTimePicker").date(D("#editdtp2").data("DateTimePicker").date()))}),D('.btn-group input[name="editDayOfWeek[]"]').change(function(){var e;0===D('input[type="checkbox"]:checked').length?D(this).prop("checked",!0).parent().addClass("active"):(e=D('input[type="checkbox"]:checked').map(function(){return parseInt(D(this).val())}).get(),-1===("allday"===c("edit")?e.indexOf(parseInt(moment(D("#editdp1").data("DateTimePicker").date()).day(),0)):e.indexOf(parseInt(moment(D("#editdtp1").data("DateTimePicker").date()).day(),0)))&&D(this).prop("checked",!0).parent().addClass("active"))}),null!==s.event.recurring){switch(s.event.recurring){case"daily":var e=u.editEvent.body.daily_recurring;break;case"weekly":e=u.editEvent.body.weekly_recurring;break;case"monthly":e=u.editEvent.body.monthly_recurring;break;case"yearly":e=u.editEvent.body.yearly_recurring;break;default:e=""}D("#editChooseRecurring li a").each(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+e+'</span><span class="caret" style="margin-top: 8px; float: right"></span>')}),D("#editRecurring").val(e),m("edit");var a=s.event.rrule.toUpperCase().split(";"),n=[];switch(D.each(a,function(e,t){var a=t.split("=");n[a[0]]=a[1]}),n.FREQ){case"DAILY":D("#editDivDaysRecurring").css("display","block"),n.INTERVAL&&D("#editEachNumberDays").val(n.INTERVAL);break;case"WEEKLY":D("#editDivWeeksRecurring").css("display","block"),D("#editChooseTime").html('weeks&nbsp;<span class="caret"></span>');var d=[];-1<n.BYDAY.indexOf("SU")&&d.push("0"),-1<n.BYDAY.indexOf("MO")&&d.push("1"),-1<n.BYDAY.indexOf("TU")&&d.push("2"),-1<n.BYDAY.indexOf("WE")&&d.push("3"),-1<n.BYDAY.indexOf("TH")&&d.push("4"),-1<n.BYDAY.indexOf("FR")&&d.push("5"),-1<n.BYDAY.indexOf("SA")&&d.push("6");var o=d.join(",");D('input[name="editDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,-1<o.indexOf(this.value)&&(this.checked=!0,D(this).parent().addClass("active"))}),n.INTERVAL&&D("#editEachNumberWeeks").val(n.INTERVAL);break;case"MONTHLY":D("#editDivWeeksRecurring").css("display","none"),D("#editChooseTime").html('months&nbsp;<span class="caret"></span>'),D("#editDivMonthsRecurring").css("display","block"),"allday"===c("edit")?(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdp1").data("DateTimePicker").date())+" "+moment(D("#editdp1").data("DateTimePicker").date()).format("dddd"))):(D("#editChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("D")),D("#editRepMonth1").text(u.core.monthly_on_the+" "+p(D("#editdtp1").data("DateTimePicker").date())+" "+moment(D("#editdtp1").data("DateTimePicker").date()).format("dddd")));var i=n.BYMONTHDAY?D("#editRepMonth0").text():D("#editRepMonth1").text();D("#editChooseMonthTime").html('<span style="float: left">'+i+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editMonthTimeRecurring").val(i),n.INTERVAL&&D("#editEachNumberMonths").val(n.INTERVAL);break;case"YEARLY":D("#editDivYearsRecurring").css("display","block");var r=n.BYMONTHDAY?D("#editRepYear0").text():D("#editRepYear1").text();D("#editChooseYearTime").html('<span style="float: left">'+r+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#editYearTimeRecurring").val(r)}n.COUNT&&(D("#editEndOccurrences").val(n.COUNT),D("#editEndRecurring li a").each(function(){D(this).text()===u.editEvent.body.after&&D(this).click()}),D("#editEndRecurring").val(u.editEvent.body.after)),n.UNTIL&&D("#editEndRecurring li a").each(function(){D(this).text()===u.editEvent.body.date&&D(this).click()}),D("#divEditRecurring").css("display","block")}D("#formEditEvent").on("submit",function(e){return e.preventDefault(),D("#editDescription2").val(D("#editDescription").html()),D.ajax({url:v+"/php/update.php",data:D("#formEditEvent").serialize(),cache:!1,type:"post",dataType:"json",success:function(e){e.status?(D("#showEvent").modal("hide"),f.refetchEvents()):alert("error : "+e.msg)},error:function(e,t){alert(h(e,t))}}),!1})})}})}),D("#btnExportEvent").on("click",function(){location.href=v+"/php/export.php?id="+s.event.id+"&uuid="+y.uuidCalendar}),D("#bntDeleteEvent").on("click",function(){D.ajax({url:v+"/php/delete.php",data:{id:s.event.id,lang:y.selectedLocaleCode,uuid:y.uuidCalendar},cache:!1,type:"post",dataType:"json",success:function(e){e.status?(D("#showEvent").modal("hide"),D("#"+y.barSearch.btnReset).click(),f.refetchEvents()):alert("error : "+e.msg)},error:function(e,t){alert(h(e,t))}})}),D("#btnDeleteSingleEvent").on("click",function(){D.ajax({url:v+"/php/delete.php",data:{id:s.event.id,eventDate:moment(a.event.start).format("YYYYMMDD"),lang:y.selectedLocaleCode,uuid:y.uuidCalendar},cache:!1,type:"post",dataType:"json",success:function(e){e.status?(D("#showEvent").modal("hide"),D("#"+y.barSearch.btnReset).click(),f.refetchEvents()):alert("error : "+e.msg)},error:function(e,t){alert(h(e,t))}})})})):alert("error : "+s.msg)}})},eventDidMount:function(e){e.event.start;var t=e.event.end;t||(endDate="");var a=e.event.title;e.event.extendedProps.location;e.event.extendedProps.location;var n,d,o,i,r=f.view;D(".popover").remove(),!0===y.popOver&&"dayGridMonth"===r.type&&(n=e.event.extendedProps.category?"categogy : "+e.event.extendedProps.category+"<br>":"categogy : none<br>",d=e.event.url?e.event.url+"<br>":"",i=0<(o=e.event.extendedProps.description?e.event.extendedProps.description:"").length?"<center>------------</center>":"",D(e.el).popover({title:a,content:n+d+i+o,trigger:"hover",placement:"top",container:"body",live:!0,html:!0}))},select:function(d){y.readOnly||D.ajax({url:v+"/ajax/newEvent.php",type:"post",data:{lang:y.selectedLocaleCode,uuid:y.uuidCalendar},success:function(e){D('<div id="cal_newModal" class="modal modCal fade col-xs-12 col-sm-12 col-md-12"></div>').appendTo("body"),D("#cal_newModal").html(e),D("#saveNew").replaceWith('<button id="saveNew" type="submit" class="btn btn-warning btn-block"><i class="glyphicon glyphicon-save"></i>&nbsp;'+u.newEvent.footer.save+"</button>"),D("#newdp1").datetimepicker({format:"YYYY-MM-DD",locale:y.selectedLocaleCode}),D("#newdp2").datetimepicker({format:"YYYY-MM-DD",locale:y.selectedLocaleCode}),D("#newdtp1").datetimepicker({format:"YYYY-MM-DD HH:mm",locale:y.selectedLocaleCode}),D("#newdtp2").datetimepicker({format:"YYYY-MM-DD HH:mm",locale:y.selectedLocaleCode}),D("#newenddp1").datetimepicker({format:"YYYY-MM-DD HH:mm",locale:y.selectedLocaleCode}),D("#newdp1").on("dp.change",function(e){var t=moment(d.startStr),a=moment(d.endStr).diff(t,"days");e.date&&e.date.add(a,"days"),D("#newdp2").data("DateTimePicker").date(e.date),D("#newdp2").data("DateTimePicker").minDate(e.date.add(1-a,"days"));var n="allday"===c("new")?moment(D("#newdp1").data("DateTimePicker").date()).format("d"):moment(D("#newdtp1").data("DateTimePicker").date()).format("d");D('input[name="newDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===n&&(this.checked=!0,D(this).parent().addClass("active"))}),"allday"===c("new")?(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")),D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")),D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#newMonthTimeRecurring").val(D("#newRepMonth0").text()),D("#newYearTimeRecurring").val(D("#newRepYear0").text())}),D("#newdp2").on("dp.change",function(e){D("#newenddp1").data("DateTimePicker").date(D("#newdp2").data("DateTimePicker").date())}),D("#newenddp1").on("dp.change",function(e){"allday"===c("new")?D("#newdp2").data("DateTimePicker").date(moment(D("#newenddp1").data("DateTimePicker").date()).format("YYYY-MM-DD")):D("#newdtp2").data("DateTimePicker").date(moment(D("#newenddp1").data("DateTimePicker").date()).format("YYYY-MM-DD HH:mm"))}),D("#newdtp1").on("dp.change",function(e){var t=moment(d.startStr),a=moment(d.startStr).add(1,"hours").diff(t,"m");e.date&&e.date.add(a,"m"),D("#newdtp2").data("DateTimePicker").date(e.date),D("#newdtp2").data("DateTimePicker").minDate(e.date.add(30-a,"m"));var n="allday"===c("new")?moment(D("#newdp1").data("DateTimePicker").date()).format("d"):moment(D("#newdtp1").data("DateTimePicker").date()).format("d");D('input[name="newDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===n&&(this.checked=!0,D(this).parent().addClass("active"))}),"allday"===c("new")?(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")),D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")),D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#newMonthTimeRecurring").val(D("#newRepMonth0").text()),D("#newYearTimeRecurring").val(D("#newRepYear0").text())}),D("#newdtp2").on("dp.change",function(e){D("#newenddp1").data("DateTimePicker").date(D("#newdtp2").data("DateTimePicker").date())}),D("#newdp1").data("DateTimePicker").date(moment(d.startStr).format("YYYY-MM-DD")),D("#newdp2").data("DateTimePicker").date(moment(d.endStr).format("YYYY-MM-DD")),D("#newdtp1").data("DateTimePicker").date(moment(d.startStr).format("YYYY-MM-DD HH:mm")),D("#newdtp2").data("DateTimePicker").date(moment(d.endStr).format("YYYY-MM-DD HH:mm")),D("#cp1").colorpicker({color:y.bgColor,format:"hex",align:"left"}),D("#cp2").colorpicker({color:y.txColor,format:"hex",align:"left"}),D("#newChooseCategory li a").click(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newCalendarCategory").val(D(this).attr("title"))}),D("#newChooseRecurring li a").click(function(){switch(D("#divNewRecurring").css("display","block"),D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRecurring").val(D(this).text()),m("new"),D(this).text()){case u.newEvent.body.daily_recurring:D("#newDivDaysRecurring").css("display","block");break;case u.newEvent.body.weekly_recurring:D("#newDivWeeksRecurring").css("display","block");var e="allday"===c("new")?moment(D("#newdp1").data("DateTimePicker").date()).format("d"):moment(D("#newdtp1").data("DateTimePicker").date()).format("d");D('input[name="newDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===e&&(this.checked=!0,D(this).parent().addClass("active"))});break;case u.newEvent.body.monthly_recurring:D("#newDivMonthsRecurring").css("display","block"),"allday"===c("new")?(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd"))):(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd"))),D("#newMonthTimeRecurring").val(D("#newRepMonth0").text());break;case u.newEvent.body.yearly_recurring:D("#newDivYearsRecurring").css("display","block"),"allday"===c("new")?(D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#newYearTimeRecurring").val(D("#newRepYear0").text());break;default:D("#divNewRecurring").css("display","none")}}),D("#newChooseMonthTimeRecurring li a").click(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newMonthTimeRecurring").val(D(this).text())}),D("#newChooseYearTimeRecurring li a").click(function(){D(this).parents(".dropdown").find(".btn").html('<span style="float: left">'+D(this).text()+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newYearTimeRecurring").val(D(this).text())}),D("#newEndRecurring li a").click(function(){D("#newEndRecurring").val(D(this).text())}),D('.btn-group input[name="newDayOfWeek[]"]').change(function(){var e;0===D('input[type="checkbox"]:checked').length?D(this).prop("checked",!0).parent().addClass("active"):(e=D('input[type="checkbox"]:checked').map(function(){return parseInt(D(this).val())}).get(),-1===("allday"===c("new")?e.indexOf(parseInt(moment(D("#newdp1").data("DateTimePicker").date()).day(),0)):e.indexOf(parseInt(moment(D("#newdtp1").data("DateTimePicker").date()).day(),0)))&&D(this).prop("checked",!0).parent().addClass("active"))}),D('input[name="newDateType"]').on("change",function(){var e="allday"===c("new")?moment(D("#newdp1").data("DateTimePicker").date()).format("d"):moment(D("#newdtp1").data("DateTimePicker").date()).format("d");D('input[name="newDayOfWeek[]"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1,this.value===e&&(this.checked=!0,D(this).parent().addClass("active"))}),"allday"===c("new")?(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")),D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdp1").data("DateTimePicker").date())+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdp1").data("DateTimePicker").date()).format("MMMM"))):(D("#newChooseMonthTime").html('<span style="float: left">'+u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepMonth0").text(u.core.every_month_on_day+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D")),D("#newRepMonth1").text(u.core.monthly_on_the+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")),D("#newChooseYearTime").html('<span style="float: left">'+u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")+'</span><span class="caret" style="margin-top: 8px; float: right"></span>'),D("#newRepYear0").text(u.core.yearly_on+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("D MMMM")),D("#newRepYear1").text(u.core.every+" "+p(D("#newdtp1").data("DateTimePicker").date())+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("dddd")+" "+u.core.of+" "+moment(D("#newdtp1").data("DateTimePicker").date()).format("MMMM"))),D("#newMonthTimeRecurring").val(D("#newRepMonth0").text()),D("#newYearTimeRecurring").val(D("#newRepYear0").text()),"allday"===c("new")&&("none"===D("#divNewDateAllday").css("display")&&D(".divNewDateAllday, .divNewDateCustom").slideToggle("fast"),D("#newenddp1").data("DateTimePicker").date(D("#newdp2").data("DateTimePicker").date())),"custom"===c("new")&&("none"===D("#divNewDateCustom").css("display")&&D(".divNewDateAllday, .divNewDateCustom").slideToggle("fast"),D("#newenddp1").data("DateTimePicker").date(D("#newdtp2").data("DateTimePicker").date()))}),D("#cal_newModal").modal("show"),D("#formNewEvent").on("submit",function(e){return e.preventDefault(),D("#newDescription2").val(D("#newDescription").html()),D.ajax({url:v+"/php/insert.php",data:D("#formNewEvent").serialize(),cache:!1,type:"post",dataType:"json",success:function(e){e.status?(D("#cal_newModal").modal("hide"),f.refetchEvents()):alert("error : "+e.msg)},error:function(e,t){alert(h(e,t))}}),!1})}})}}),n(y.selectedLocaleCode),f.render(),d(y.optCategories);try{null!==document.getElementById(y.barLanguage.selector)&&(f.getAvailableLocaleCodes().forEach(function(e){var t;(-1<jQuery.inArray(e,Object.keys(y.barLanguage.enabled))||-1<jQuery.inArray("all",Object.keys(y.barLanguage.enabled))||e===y.selectedLocaleCode)&&((t=document.createElement("option")).value=e,t.selected=e===y.initialLocaleCode,t.innerText=-1<jQuery.inArray("all",Object.keys(y.barLanguage.enabled))?e:y.barLanguage.enabled[e],document.getElementById(y.barLanguage.selector).appendChild(t))}),document.getElementById(y.barLanguage.selector).addEventListener("change",function(){if(this.value){var e=this.value,t=v+"resources/locales/"+e+".json",a=v+"resources/locales/en.json";if(!1===t.fileExists()){if("en"===e)return void alert("Please check if exist the default language files (en) for this calendar :\r\n\r\n"+t+"\r\n\r\n");if(!1===a.fileExists())return void alert("Please check if exist the language files ("+e+" and en) for this calendar :\r\n\r\n"+t+"\r\n"+a+"\r\n\r\n");alert("Your selected language file ("+e+") does'n exist, default english language was selected (only for GUI)"),e="en"}f.setOption("locale",this.value),y.selectedLocaleCode=e,n(y.selectedLocaleCode),d(y.optCategories)}}))}catch(e){}D(".div-cal").bind("refreshCalendar",function(){f.refetchEvents()});try{D("#"+y.barSearch.btnSearch).on("click",function(){f.batchRendering(function(){for(var e=f.getEvents(),t=0;t<e.length;t++){var a=e[t];-1<a.title.toLowerCase().indexOf(D("#"+y.barSearch.txtSearch).val().toLowerCase())||-1<a.extendedProps.description.toLowerCase().indexOf(D("#"+y.barSearch.txtSearch).val())?a.setProp("display","auto"):a.setProp("display","none")}})})}catch(e){}try{D("#"+y.barSearch.btnReset).on("click",function(){D("#"+y.barSearch.txtSearch).val(""),D("#"+y.barSearch.btnSearch).click()})}catch(e){}function c(e){return"new"===e?D('input[name="newDateType"]:checked').val():"edit"===e?D('input[name="editDateType"]:checked').val():void 0}function m(e){D("#"+e+"DivDaysRecurring").css("display","none"),D("#"+e+"DivWeeksRecurring").css("display","none"),D("#"+e+"DivMonthsRecurring").css("display","none"),D("#"+e+"DivYearsRecurring").css("display","none"),D('input[name="'+e+'DayOfWeek"]').each(function(){D(this).parent().removeClass("active"),this.checked=!1}),D("#"+e+"-pills-never-tab").removeClass("active"),D("#"+e+"-pills-date-tab").removeClass("active"),D("#"+e+"-pills-after-tab").removeClass("active"),D("#"+e+"-pills-never-tab").parent().removeClass("active"),D("#"+e+"-pills-date-tab").parent().removeClass("active"),D("#"+e+"-pills-after-tab").parent().removeClass("active"),D("#"+e+"-pills-date").removeClass("show active"),D("#"+e+"-pills-after").removeClass("show active"),D("#"+e+"EndOccurrences").val("1"),D("#"+e+"-pills-never-tab").addClass("active"),D("#"+e+"-pills-never-tab").parent().addClass("active"),"allday"===c(e)?(D("#"+e+"enddp1").data("DateTimePicker").date(D("#"+e+"dp2").data("DateTimePicker").date()),D("#"+e+"enddp1").data("DateTimePicker").minDate(D("#"+e+"dp1").data("DateTimePicker").date())):(D("#"+e+"enddp1").data("DateTimePicker").date(D("#"+e+"dtp2").data("DateTimePicker").date()),D("#"+e+"enddp1").data("DateTimePicker").minDate(D("#"+e+"dtp1").data("DateTimePicker").date()))}function p(e){var t=u.core.week_of_month;prefixes=[t.first,t.second,t.third,t.fourth,t.last];var a=moment(e),n=a.day(),d=a.dayOfYear(),o=0;for(a.startOf("month");a.dayOfYear()<=d;)a.day()===n&&o++,a.add(1,"days");return prefixes[o-1]}return y.barImport&&null!==document.getElementById(y.barImport.btnExport)&&D("#"+y.barImport.btnExport).on("click",function(){location.href=v+"php/exportAll.php?uuid="+y.uuidCalendar}),y.barImport&&null!==document.getElementById(y.barImport.btnImport)&&D("#"+y.barImport.btnImport).on("click",function(){D.ajax({url:v+"/ajax/import.php",type:"post",data:{lang:y.selectedLocaleCode},success:function(e){D("#importModal").remove(),D('<div id="importModal" class="modal fade col-xs-12 col-sm-12 col-md-12"></div>').appendTo("body"),D("#importModal").html(e),D("#importModal").modal("show"),D("#btn_upload").click(function(){var e=new FormData,t=D("#file")[0].files[0];e.append("file",t),e.append("lang",y.selectedLocaleCode),D("#btn_upload").replaceWith('<button id="btn_upload" type="button" class="btn btn-warning btn-block disabled">Loading...</button>'),D.ajax({url:v+"/php/import.php",data:e,cache:!1,type:"post",dataType:"json",contentType:!1,processData:!1,success:function(e){var t;e.status?(D("#btn_upload").replaceWith('<button id="btn_upload" type="button" class="btn btn-warning btn-block disabled">'+e.importedEvents.length+" events loaded</button>"),D("#fileContent").val(e.contentFile),setTimeout(function(){D("#importModal").modal("hide")},3e3),1<f.getEventSources().length&&((t=f.getEventSourceById(99999))&&t.remove()),f.addEventSource({id:99999,events:e.importedEvents,failure:function(){alert("Error loading events")}}),f.refetchEvents(),D("#"+y.barImport.btnReset).prop("disabled",!1),D("#"+y.barImport.btnReset).on("click",function(){var e;1<f.getEventSources().length&&((e=f.getEventSourceById(99999))&&e.remove()),f.refetchEvents(),D("#"+y.barImport.btnReset).prop("disabled",!0)})):(D("#fileContent").val(e.msg),D("#btn_upload").replaceWith('<button id="btn_upload" type="submit" class="btn btn-warning btn-block"><i class="glyphicon glyphicon-upload"></i>&nbsp;Upload</button>'))},error:function(e,t){D("#btn_upload").replaceWith('<button id="btn_upload" type="submit" class="btn btn-warning btn-block"><i class="glyphicon glyphicon-upload"></i>&nbsp;Upload</button>'),D("#fileContent").val(h(e,t))}})}),D("#formLoadURL").on("submit",function(e){return e.preventDefault(),D("#btn_upload_from_URL").replaceWith('<button id="btn_upload_from_URL" type="button" class="btn btn-warning btn-block disabled">Loading...</button>'),D.ajax({url:v+"/php/import.php",data:D("#formLoadURL").serialize(),cache:!1,type:"post",dataType:"json",success:function(e){var t;e.status?(D("#btn_upload_from_URL").replaceWith('<button id="btn_upload_from_URL" type="button" class="btn btn-warning btn-block disabled">'+e.importedEvents.length+" events loaded</button>"),setTimeout(function(){D("#importModal").modal("hide")},3e3),1<f.getEventSources().length&&((t=f.getEventSourceById(99999))&&t.remove()),f.addEventSource({id:99999,events:e.importedEvents,failure:function(){alert("Error loading events")}}),f.refetchEvents(),D("#"+y.barImport.btnReset).prop("disabled",!1),D("#"+y.barImport.btnReset).on("click",function(){var e;1<f.getEventSources().length&&((e=f.getEventSourceById(99999))&&e.remove()),f.refetchEvents(),D("#"+y.barImport.btnReset).prop("disabled",!0)})):alert(e.msg)},error:function(e,t){alert(h(e,t))}}),!1})}})}),this}};if(void 0===e)return t.getLocaleCodes(),t;var f,u="",y={initCal:!1,uuidCalendar:"",selectedLocaleCode:"en",barLanguage:null,barSearch:null,barImport:null,divLoad:"",divCal:"",popOver:!1,readOnly:!1,txColor:"#ffffff",bgColor:"#000000",bgColorImported:"#fff000",optCategories:"",initialTimeZone:"UTC"};if(e=D.extend(y,e),null!==document.getElementById(y.divCal))if(null!==document.getElementById("caljs")){var a,o=D("<a>",{href:document.getElementById("caljs").src}),v=o.prop("protocol")+"//"+o.prop("hostname")+"/"+o.prop("pathname").substring(0,o.prop("pathname").lastIndexOf("/")+1);if(a=y.uuidCalendar,D.ajax({url:v+"ajax/getSettings.php",async:!1,type:"POST",cache:!1,data:{uuid:a},dataType:"json",success:function(e){if(e.status){y.txColor=e.calendar.textColor,y.bgColor=e.calendar.bgColor,y.selectedLocaleCode=e.calendar.language,y.optCategories=e.calendar.categories;var t=v+"resources/locales/"+y.selectedLocaleCode+".json",a=v+"resources/locales/en.json";if(!1===t.fileExists()){if("en"===y.selectedLocaleCode)return void alert("Please check if exist the default language files (en) for this calendar :\r\n\r\n"+t+"\r\n\r\n");if(!1===a.fileExists())return void alert("Please check if exist the language files ("+y.selectedLocaleCode+" and en) for this calendar :\r\n\r\n"+t+"\r\n"+a+"\r\n\r\n");alert("Your selected language file ("+y.selectedLocaleCode+") does'n exist, default english language was selected"),y.selectedLocaleCode="en"}y.initCal=!0}else alert("Error getting calendar settings from database"),y.initCal=!1},error:function(e,t){alert(h(e,t))}}),!1!==y.initCal)return t.init(e),t}else alert("Please assign id='caljs' to calendarmaker.js");else alert("Please, specifies a div to render the calendar")}}(jQuery);